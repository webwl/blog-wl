TODO 
- install之后，发生了什么？
- 整理一下关于入口文件的问题，以及第三方包应该如何暴露自己 。类似于vue这种对自身插件有特殊需求的，改怎么暴露
- 关于可执行文件，弄清楚 package.json中，script命令中的命令是如何来的。描述清楚
- 关于不同环境，不同模块化规范，应该如何安排？是否要都用babel转成UMD规范兼容？还是不同环境的包用不同的规范？如何最优解？

> 如果软件包是可执行文件，该怎么办？在这种情况下，它会把可执行文件放到 node_modules/.bin/ 文件夹下。

这句话怎么理解？只要导出一个挂载多个可执行函数的对象，这些方法就会被放到bin目录下，然后在package.json文件的script中就可以执行了吗？

理解什么是可执行文件？暴露出口可否直接暴露非函数文件？

# 如何暴露包入口
> npm init

初始化完成以后`package.json`内容如下
```
{
  "name": "test-init",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC"
}
```
项目名称很重要，一般来说这就是包的名称。版本也很重要，这是以后管理包的依据。其次就是`main`，`main`就是我们暴露给外部的入口文件，默认是根目录的`index.js`文件，但是我们可以根据自己的需求更改。

除了`main`以外，我们也可以使用`module`参数来配置我们的入口。用`main`参数配置，就是普通入口，用`module`配置，就是告诉`NPM`我们这个包支持`ES Module`模块化，很多打包工具便会自动识别出来，在打包的时候通过tree-shaking就可以按需打包，只打包引用到的内容

关于模块化的内容可以看[这里](/框架通识/模块化.md)

# 入口文件该怎么写？
入口文件要做的就是暴露出你提供的方法，但是具体怎么暴露要根据具体需求来。

比如你只想写一个字母大小写转换的方法，你随意暴露一个`function`就行，但是如果是有特殊需求的，比如vue的插件，会强行要求暴露一个`install`方法。例如我们要写很多自定义的vue组件扔到npm包里
```
// index.js 包入口文件
import Aaa from './components/aaa'
import Bbb from './components/bbb'
const components = {
  Aaa,
  Bbb
}
function install(Vue) {
  // 全局注册组件
  Object.values(components).forEach(component => {
    Vue.component(component.name, component)
  })
}
export default { install }
```
```
// main.js 引用文件

// 假如包叫npm-test
import textComponents from 'npm-test'
Vue.use(textComponents)
```

# 参考资料
  - [node中文文档](http://nodejs.cn/learn/how-to-use-or-execute-a-package-installed-using-npm)
  - [vue官方文档-开发插件](https://cn.vuejs.org/v2/guide/plugins.html)
  - [npm官方文档-script](https://docs.npmjs.com/cli/v8/commands/npm-run-script)
  - [知乎-node_modules .bin 目录哪里来的？](https://www.zhihu.com/question/333901187)